<!-- Language Selector -->
<div class="relative ml-3">
    <button id="language-menu-button"
        class="flex items-center space-x-2 bg-secondary-50 hover:bg-secondary-100 rounded-full py-3 pl-1 pr-3 transition-colors">
        <span class="sr-only">{{ _('Open language menu') }}</span>
        <span class="flex items-center">
            <i class="fas fa-globe mr-1 text-accent-500"></i>
            <span class="hidden md:inline">{{ AVAILABLE_LANGUAGES[CURRENT_LANGUAGE] }}</span>
            <i class="fas fa-chevron-down text-xs ml-1"></i>
        </span>
    </button>

    <!-- Language Dropdown Menu -->
    <div id="language-menu"
        class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-secondary-50 ring-1 ring-black ring-opacity-5 focus:outline-none z-50">
        {% for code, name in AVAILABLE_LANGUAGES.items() %}
        <a href="{{ url_for('set_language', language=code) }}"
            class="block px-4 py-2 text-sm text-secondary-700 hover:bg-secondary-100 {% if CURRENT_LANGUAGE == code %}font-bold bg-secondary-50{% endif %}">
            {{ name }}
        </a>
        {% endfor %}
    </div>
</div>

<script>
    // Simple dropdown toggle without JS dependencies
    document.getElementById('language-menu-button').addEventListener('click', function () {
        var menu = document.getElementById('language-menu');
        menu.classList.toggle('hidden');
    });

    // Close the dropdown when clicking outside
    document.addEventListener('click', function (event) {
        var button = document.getElementById('language-menu-button');
        var menu = document.getElementById('language-menu');

        if (!button.contains(event.target) && !menu.contains(event.target)) {
            menu.classList.add('hidden');
        }
    });
</script>