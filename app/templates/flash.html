{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="flash-container fixed bottom-5 right-5 flex flex-col gap-3">
    {% for category, message in messages %}
    <div class="flash-message relative rounded-lg overflow-hidden" role="alert">
        <div
            class="flex items-center p-4 {% if category == 'success' %}bg-green-500 text-white{% elif category == 'error' %}bg-red-500 text-white{% elif category == 'warning' %}bg-orange-500 text-orange-900{% else %}bg-primary-500 text-white{% endif %}">
            <!-- Icon based on message type -->
            <div class="flex-shrink-0 mr-3">
                {% if category == 'success' %}
                <i class="fas fa-check-circle text-xl"></i>
                {% elif category == 'error' %}
                <i class="fas fa-exclamation-circle text-xl"></i>
                {% elif category == 'warning' %}
                <i class="fas fa-exclamation-triangle text-xl"></i>
                {% else %}
                <i class="fas fa-info-circle text-xl"></i>
                {% endif %}
            </div>

            <!-- Message content -->
            <div class="flex-1 mr-2">
                <p class="font-medium">
                    {% if category == 'success' %}
                    {{ _('Success') }}
                    {% elif category == 'error' %}
                    {{ _('Error') }}
                    {% elif category == 'warning' %}
                    {{ _('Warning') }}
                    {% else %}
                    {{ _('Information') }}
                    {% endif %}
                </p>
                <p class="text-sm opacity-90">{{ message }}</p>
            </div>

            <!-- Close button -->
            <button type="button"
                class="flash-close flex-shrink-0 ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8 {% if category == 'success' %}hover:bg-green-600{% elif category == 'error' %}hover:bg-red-600{% elif category == 'warning' %}hover:bg-orange-600{% else %}hover:bg-primary-600{% endif %} focus:ring-2 focus:ring-white">
                <span class="sr-only">{{ _('Close') }}</span>
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Progress bar -->
        <div
            class="flash-progress {% if category == 'success' %}bg-green-300{% elif category == 'error' %}bg-red-300{% elif category == 'warning' %}bg-orange-300{% else %}bg-primary-300{% endif %}">
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}